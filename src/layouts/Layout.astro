---
import Breadcrumb from '../components/Breadcrumb.astro';
// import BotProtection from '../components/BotProtection.astro'; // Too many false positives

export interface BreadcrumbItem {
	name: string;
	url: string;
}

export interface Props {
	title?: string;
	description?: string;
	keywords?: string;
	breadcrumbs?: BreadcrumbItem[];
}

const { 
	title = "Same-Day Phone Repair Dallas Fort Worth | We Come to You | GadgetFix", 
	description = "Get same-day phone repair at your location in Dallas Fort Worth. iPhone, Samsung & iPad fix with 90-day warranty. Call (402) 416-6942 now for mobile service!",
	keywords = "phone repair dallas, iphone repair fort worth, samsung repair dfw, screen replacement near me, GadgetFix dallas, emergency phone repair, same day repair dallas fort worth",
	breadcrumbs = []
} = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<!-- Optimize for mobile -->
		<meta name="HandheldFriendly" content="true">
		<meta name="MobileOptimized" content="320">
		<!-- Prevent font resize on orientation change -->
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
		<!-- Optimize rendering -->
		<meta name="renderer" content="webkit">
		<meta name="force-rendering" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		
		<!-- DNS Prefetch and Preconnect for external resources -->
		<link rel="dns-prefetch" href="https://www.googletagmanager.com">
		<link rel="dns-prefetch" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="preconnect" href="https://www.googletagmanager.com">
		<meta name="generator" content={Astro.generator} />
		
		<!-- Critical above-the-fold CSS for instant rendering -->
		<style>
			:root { 
				--primary-blue: #0066cc; 
				--secondary-blue: #4d94ff;
				--light-blue: #e6f2ff;
				--dark-blue: #004499;
			}
			body { 
				margin: 0; 
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Helvetica Neue', Arial, sans-serif;
				line-height: 1.6;
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
				text-rendering: optimizeLegibility;
			}
			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 0 1rem;
			}
			/* Prevent layout shift */
			* {
				box-sizing: border-box;
			}
			h1, h2, h3 { 
				line-height: 1.2;
				margin-top: 0;
			}
			/* Mobile-first responsive */
			@media (max-width: 768px) {
				html { font-size: 16px; }
			}
		</style>
		<title>{title}</title>
		<meta name="description" content={description} />
		<meta name="keywords" content={keywords} />
		
		<!-- Critical SEO Meta Tags -->
		<link rel="canonical" href={Astro.url.href} />
		<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
		<meta name="author" content="GadgetFix LLC" />
		
		<!-- Local SEO Meta Tags -->
		<meta name="geo.region" content="US-TX">
		<meta name="geo.placename" content="Dallas Fort Worth">
		<meta name="geo.position" content="32.7767;-96.7970">
		<meta name="ICBM" content="32.7767, -96.7970">
		
		<!-- Enhanced Open Graph Tags -->
		<meta property="og:title" content={title}>
		<meta property="og:description" content={description}>
		<meta property="og:type" content="business.business">
		<meta property="og:url" content={Astro.url.href}>
		<meta property="og:image" content="https://gadgetfixllc.com/images/gadgetfix-og-image.svg">
		<meta property="og:image:width" content="1200">
		<meta property="og:image:height" content="630">
		<meta property="og:image:alt" content="GadgetFix LLC - Professional Phone Repair Dallas Fort Worth">
		<meta property="og:site_name" content="GadgetFix LLC">
		<meta property="og:locale" content="en_US">
		
		<!-- Twitter Card Tags -->
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:title" content={title}>
		<meta name="twitter:description" content={description}>
		<meta name="twitter:image" content="https://gadgetfixllc.com/images/gadgetfix-twitter-card.svg">
		<meta name="twitter:image:alt" content="GadgetFix LLC - Mobile Phone Repair Service Dallas Fort Worth">
		
		<!-- Business Information Meta Tags -->
		<meta name="business:contact_data:phone_number" content="+14024166942">
		<meta name="business:contact_data:locality" content="Dallas">
		<meta name="business:contact_data:region" content="Texas">
		<meta name="business:contact_data:country_name" content="United States">
		
		<!-- Google Search Console Verification -->
		<meta name="google-site-verification" content="VWfgCzwbjtKtlwg5w9leLSFCzLKsQOacl5pGH62EbFA" />
		<!-- Google Search Console verification code successfully configured -->
		
		<!-- Optimized Google Analytics - Delay loading for better performance -->
		<script>
		  // Initialize dataLayer but delay gtag loading
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  
		  // Load analytics after user interaction or 3 seconds
		  let analyticsLoaded = false;
		  function loadAnalytics() {
		    if (analyticsLoaded) return;
		    analyticsLoaded = true;
		    
		    gtag('js', new Date());
		    gtag('config', 'G-ZMZTT343DN', {
		      page_title: document.title,
		      page_location: window.location.href
		    });
		    
		    var gtagScript = document.createElement('script');
		    gtagScript.async = true;
		    gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-ZMZTT343DN';
		    document.head.appendChild(gtagScript);
		  }
		  
		  // Load on user interaction
		  ['scroll', 'click', 'touchstart'].forEach(event => {
		    window.addEventListener(event, loadAnalytics, {once: true, passive: true});
		  });
		  
		  // Or load after 3 seconds as fallback
		  setTimeout(loadAnalytics, 3000);
		</script>
		
		<!-- Google Ads (AdWords) Conversion Tracking - Delayed -->
		<script>
		  // Delay Google Ads loading for better performance
		  function loadGoogleAds() {
		    var googleAdsScript = document.createElement('script');
		    googleAdsScript.async = true;
		    googleAdsScript.src = 'https://www.googletagmanager.com/gtag/js?id=AW-17217204638';
		    document.head.appendChild(googleAdsScript);
		    
		    googleAdsScript.onload = function() {
		      if (typeof gtag !== 'undefined') {
		        try {
		          gtag('config', 'AW-17217204638');
		        } catch (e) {
		          console.debug('Google Ads config unavailable');
		        }
		      }
		    };
		  }
		  
		  // Load after analytics (which loads after interaction)
		  setTimeout(loadGoogleAds, 4000);
		</script>
		
		<!-- Optimized Google Fonts Loading -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="preload" href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700;800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
		<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700;800&display=swap"></noscript>
		
		<!-- Enhanced Local Business Schema -->
		<script type="application/ld+json">
		{
		  "@context": "https://schema.org",
		  "@type": "MobilePhoneStore",
		  "additionalType": ["MobileService", "OnSiteService"],
		  "@id": "https://gadgetfixllc.com/#business",
		  "name": "GadgetFix LLC",
		  "alternateName": "GadgetFix",
		  "description": "Mobile phone repair service covering Dallas-Fort Worth. We come to you! Same-day iPhone screen repair from $79. Samsung, iPad & computer fix at your location.",
		  "image": "https://gadgetfixllc.com/images/gadgetfix-logo.svg",
		  "logo": "https://gadgetfixllc.com/images/gadgetfix-logo.svg",
		  "telephone": "+1-402-416-6942",
		  "url": "https://gadgetfixllc.com",
		  "address": {
		    "@type": "PostalAddress",
		    "addressLocality": "Dallas",
		    "addressRegion": "TX",
		    "postalCode": "75001",
		    "addressCountry": "US"
		  },
		  "geo": {
		    "@type": "GeoCoordinates",
		    "latitude": 32.7767,
		    "longitude": -96.7970
		  },
		  "openingHoursSpecification": [
		    {
		      "@type": "OpeningHoursSpecification",
		      "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
		      "opens": "08:00",
		      "closes": "18:00"
		    }
		  ],
		  "priceRange": "$",
		  "providesMobilityService": true,
		  "serviceType": "Mobile device repair at your location",
		  "areaServed": [
		    {
		      "@type": "City",
		      "name": "Dallas"
		    },
		    {
		      "@type": "City",
		      "name": "Fort Worth"
		    },
		    {
		      "@type": "City",
		      "name": "Plano"
		    },
		    {
		      "@type": "City",
		      "name": "Frisco"
		    },
		    {
		      "@type": "City",
		      "name": "Irving"
		    },
		    {
		      "@type": "City",
		      "name": "Arlington"
		    }
		  ],
		  "hasOfferCatalog": {
		    "@type": "OfferCatalog",
		    "name": "Phone Repair Services",
		    "itemListElement": [
		      {
		        "@type": "Offer",
		        "itemOffered": {
		          "@type": "Service",
		          "name": "iPhone Screen Repair",
		          "description": "Same-day iPhone screen replacement for all models"
		        }
		      },
		      {
		        "@type": "Offer",
		        "itemOffered": {
		          "@type": "Service",
		          "name": "Samsung Galaxy Repair",
		          "description": "Expert Samsung phone repair services"
		        }
		      },
		      {
		        "@type": "Offer",
		        "itemOffered": {
		          "@type": "Service",
		          "name": "Battery Replacement",
		          "description": "Professional battery replacement with warranty"
		        }
		      },
		      {
		        "@type": "Offer",
		        "itemOffered": {
		          "@type": "Service",
		          "name": "Water Damage Recovery",
		          "description": "Expert water damage recovery and restoration"
		        }
		      }
		    ]
		  }
		}
		</script>

		<!-- Business Reviews Schema -->
		<script type="application/ld+json">
		{
		  "@context": "https://schema.org",
		  "@type": "LocalBusiness",
		  "@id": "https://gadgetfixllc.com/#business",
		  "name": "GadgetFix LLC",
		  "review": [
		    {
		      "@type": "Review",
		      "reviewRating": {
		        "@type": "Rating",
		        "ratingValue": "5",
		        "bestRating": "5"
		      },
		      "author": {
		        "@type": "Person",
		        "name": "Sarah M."
		      },
		      "datePublished": "2024-01-15",
		      "reviewBody": "Amazing service! My iPhone 14 screen was cracked badly and they came to my office in Plano within 30 minutes. Fixed it perfectly and the warranty gave me peace of mind. Highly recommend!"
		    },
		    {
		      "@type": "Review",
		      "reviewRating": {
		        "@type": "Rating",
		        "ratingValue": "5",
		        "bestRating": "5"
		      },
		      "author": {
		        "@type": "Person",
		        "name": "Mike Rodriguez"
		      },
		      "datePublished": "2024-01-08",
		      "reviewBody": "Fast and professional Samsung Galaxy repair in Fort Worth. Water damage recovery saved my phone with all my photos. The technician was knowledgeable and explained everything clearly."
		    },
		    {
		      "@type": "Review",
		      "reviewRating": {
		        "@type": "Rating",
		        "ratingValue": "5",
		        "bestRating": "5"
		      },
		      "author": {
		        "@type": "Person",
		        "name": "Jennifer Chen"
		      },
		      "datePublished": "2024-01-03",
		      "reviewBody": "Excellent mobile repair service! They came to my home in Dallas and fixed my iPad screen in 45 minutes. Fair pricing and quality work. Will definitely use again."
		    },
		    {
		      "@type": "Review",
		      "reviewRating": {
		        "@type": "Rating",
		        "ratingValue": "4",
		        "bestRating": "5"
		      },
		      "author": {
		        "@type": "Person",
		        "name": "David Park"
		      },
		      "datePublished": "2023-12-28",
		      "reviewBody": "Good service overall. iPhone battery replacement was done quickly and works great. Only minor issue was arrival time was 45 minutes instead of 30, but the quality made up for it."
		    },
		    {
		      "@type": "Review",
		      "reviewRating": {
		        "@type": "Rating",
		        "ratingValue": "5",
		        "bestRating": "5"
		      },
		      "author": {
		        "@type": "Person",
		        "name": "Lisa Thompson"
		      },
		      "datePublished": "2023-12-20",
		      "reviewBody": "Outstanding emergency repair service! My phone broke right before an important work presentation. They arrived in 20 minutes to my Irving office and had it fixed in time. Lifesavers!"
		    }
		  ]
		}
		</script>
	</head>
	<body>
		<header class="header">
			<div class="container">
				<div class="header-content">
					<div class="logo">
						<a href="/">
							<span class="logo-text">GadgetFix</span>
						</a>
					</div>
					<nav class="nav">
						<ul class="nav-links">
							<li><a href="/services">Services</a></li>
							<li><a href="/locations">Locations</a></li>
							<li><a href="/about">About</a></li>
							<li><a href="/blog">Blog</a></li>
							<li><a href="/contact">Contact</a></li>
						</ul>
					</nav>
					<button class="mobile-menu-toggle" aria-label="Toggle mobile menu">
						<span></span>
						<span></span>
						<span></span>
					</button>
				</div>
			</div>
		</header>

		{breadcrumbs.length > 0 && <Breadcrumb items={breadcrumbs} />}

		<main>
			<slot />
		</main>

		<footer class="footer">
			<div class="container">
				<div class="footer-grid">
					<!-- Company Info Column -->
					<div class="footer-brand">
						<h2 class="footer-logo">GadgetFix</h2>
						<p class="footer-tagline">Mobile Service Available</p>
						<p class="footer-availability">Available Throughout DFW • 7 Days a Week</p>
					</div>
					
					<!-- Services Column -->
					<div class="footer-column">
						<h3 class="footer-heading">SERVICES</h3>
						<ul class="footer-links">
							<li><a href="/screen-replacement">Screen Repair</a></li>
							<li><a href="/iphone-repair-dallas">Battery Replacement</a></li>
							<li><a href="/emergency-phone-repair">Water Damage Recovery</a></li>
							<li><a href="/services">Charging Port Repair</a></li>
							<li><a href="/services">Camera Repair</a></li>
							<li><a href="/windows-troubleshooting-dfw">Software Issues</a></li>
							<li><a href="/services" class="footer-link-all">All Services →</a></li>
						</ul>
					</div>
					
					<!-- Service Areas Column -->
					<div class="footer-column">
						<h3 class="footer-heading">SERVICE AREAS</h3>
						<ul class="footer-links">
							<li><a href="/locations/dallas-county/dallas">Dallas, TX</a></li>
							<li><a href="/locations/tarrant-county/fort-worth">Fort Worth, TX</a></li>
							<li><a href="/locations/dallas-county/plano">Plano, TX</a></li>
							<li><a href="/locations/dallas-county/irving">Irving, TX</a></li>
							<li><a href="/locations/tarrant-county/arlington">Arlington, TX</a></li>
							<li><a href="/locations" class="footer-link-all">All Locations →</a></li>
						</ul>
					</div>
					
					<!-- Company Column -->
					<div class="footer-column">
						<h3 class="footer-heading">COMPANY</h3>
						<ul class="footer-links">
							<li><a href="/about">About Us</a></li>
							<li><a href="/about#experts">Electronics Expert</a></li>
							<li><a href="/blog">Blog & Tips</a></li>
							<li><a href="/contact">Contact Us</a></li>
							<li><a href="/services#mobile">Mobile Service</a></li>
						</ul>
					</div>
					
					<!-- Resources Column -->
					<div class="footer-column">
						<h3 class="footer-heading">RESOURCES</h3>
						<ul class="footer-links">
							<li><a href="/blog#device-care">Device Care Guide</a></li>
							<li><a href="/blog#common-issues">Common Issues</a></li>
							<li><a href="/terms">Terms of Service</a></li>
							<li><a href="/privacy">Privacy Policy</a></li>
						</ul>
					</div>
				</div>
				
				<!-- Footer Bottom -->
				<div class="footer-bottom">
					<p class="footer-copyright">© 2025 GadgetFix LLC. All rights reserved.</p>
					<div class="footer-social">
						<a href="#" aria-label="Facebook" class="social-link">
							<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
								<path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
							</svg>
						</a>
						<a href="#" aria-label="Instagram" class="social-link">
							<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
								<path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM5.838 12a6.162 6.162 0 1 1 12.324 0 6.162 6.162 0 0 1-12.324 0zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm4.965-10.405a1.44 1.44 0 1 1 2.881.001 1.44 1.44 0 0 1-2.881-.001z"/>
							</svg>
						</a>
						<a href="#" aria-label="YouTube" class="social-link">
							<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
								<path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
							</svg>
						</a>
					</div>
				</div>
			</div>
		</footer>


		<script>
			// Mobile menu toggle
			const mobileToggle = document.querySelector('.mobile-menu-toggle');
			const nav = document.querySelector('.nav');
			
			if (mobileToggle && nav) {
				mobileToggle.addEventListener('click', () => {
					nav.classList.toggle('nav-open');
					mobileToggle.classList.toggle('active');
				});
			}
		</script>
		
		<!-- Bot Protection System -->
		<!-- <BotProtection /> Disabled: Too many false positives -->
		
		<!-- Performance optimized JavaScript -->
		<script>
			// Defer non-critical JavaScript
			window.addEventListener('load', function() {
				// Mark page as loaded for CSS optimizations
				document.documentElement.classList.add('loaded');
				
				// Prefetch internal links on hover for instant navigation
				document.addEventListener('mouseover', function(e) {
					const link = e.target.closest('a');
					if (link && link.hostname === window.location.hostname && !link.hasAttribute('data-prefetched')) {
						const prefetchLink = document.createElement('link');
						prefetchLink.rel = 'prefetch';
						prefetchLink.href = link.href;
						document.head.appendChild(prefetchLink);
						link.setAttribute('data-prefetched', 'true');
					}
				});
				
				// Enhanced Phone Call Conversion Tracking
				const phoneLinks = document.querySelectorAll('a[href^="tel:"]');
				phoneLinks.forEach(link => {
					link.addEventListener('click', function(e) {
						const clickSource = this.className || this.closest('div').className || 'unknown';
						const phoneNumber = this.href.replace('tel:', '');
						const pageLocation = window.location.pathname;
						
						if (typeof gtag !== 'undefined') {
							try {
								// Primary phone call conversion event (GA4)
								gtag('event', 'click_to_call', {
								'event_category': 'Phone_Conversion',
								'event_label': `Phone Call - ${clickSource} - ${phoneNumber}`,
								'phone_source': clickSource,
								'phone_number': phoneNumber,
								'page_location': pageLocation,
								'value': 10
							});
							
							// Google Ads conversion tracking
								gtag('event', 'conversion', {
									'send_to': 'AW-17217204638/phone_call_conversion',
									'value': 25.0,
									'currency': 'USD'
								});
							} catch (e) {
								console.debug('Analytics tracking unavailable');
							}
						}
						
						// Enhanced tracking for different phone elements
						if (typeof gtag !== 'undefined') {
							try {
								if (clickSource.includes('floating')) {
									gtag('event', 'floating_phone_click', {
										'event_category': 'High_Intent_Conversion',
										'event_label': 'Floating Button',
										'value': 15
									});
								} else if (clickSource.includes('banner')) {
									gtag('event', 'banner_phone_click', {
										'event_category': 'Top_Banner_Conversion',
										'event_label': 'Top Banner',
										'value': 12
									});
								} else if (clickSource.includes('footer')) {
									gtag('event', 'footer_phone_click', {
										'event_category': 'Footer_Conversion',
										'event_label': 'Footer Link',
										'value': 8
									});
								}
							} catch (e) {
								console.debug('Enhanced phone tracking unavailable');
							}
						}
					});
				});
				
				// Scroll Depth Tracking
				let scrollDepths = {25: false, 50: false, 75: false, 100: false};
				let maxScroll = 0;
				
				function trackScrollDepth() {
					const scrollPercent = Math.round((window.scrollY + window.innerHeight) / document.documentElement.scrollHeight * 100);
					
					if (scrollPercent > maxScroll) {
						maxScroll = scrollPercent;
						
						Object.keys(scrollDepths).forEach(depth => {
							if (scrollPercent >= depth && !scrollDepths[depth]) {
								scrollDepths[depth] = true;
								if (typeof gtag !== 'undefined') {
									try {
										gtag('event', 'scroll', {
											'event_category': 'Engagement',
											'event_label': `${depth}%`,
											'value': depth
										});
									} catch (e) {
										console.debug('Scroll tracking unavailable');
									}
								}
							}
						});
					}
				}
				
				// Debounced scroll tracking
				let scrollTimer;
				window.addEventListener('scroll', () => {
					clearTimeout(scrollTimer);
					scrollTimer = setTimeout(trackScrollDepth, 100);
				}, { passive: true });
				
				// Page Engagement Time Tracking
				let startTime = Date.now();
				let totalEngagedTime = 0;
				let isEngaged = true;
				let engagementTimer;
				
				function trackEngagement() {
					if (isEngaged) {
						totalEngagedTime += Date.now() - startTime;
						
						// Send engagement time every 30 seconds
						if (totalEngagedTime > 0 && totalEngagedTime % 30000 < 1000) {
							if (typeof gtag !== 'undefined') {
								try {
									gtag('event', 'page_engagement', {
										'event_category': 'Engagement',
										'event_label': 'Time on Page',
										'value': Math.round(totalEngagedTime / 1000),
										'engagement_time_seconds': Math.round(totalEngagedTime / 1000)
									});
								} catch (e) {
									console.debug('Engagement tracking unavailable');
								}
							}
						}
					}
					startTime = Date.now();
				}
				
				// Track when user is engaged/disengaged
				document.addEventListener('visibilitychange', () => {
					isEngaged = !document.hidden;
					if (isEngaged) {
						startTime = Date.now();
						engagementTimer = setInterval(trackEngagement, 1000);
					} else {
						clearInterval(engagementTimer);
						trackEngagement();
					}
				});
				
				// Start engagement tracking
				engagementTimer = setInterval(trackEngagement, 1000);
				
				// Track CTA Button Clicks
				document.addEventListener('click', function(e) {
					const button = e.target.closest('.btn, .cta-button, button[type="submit"]');
					if (button) {
						const buttonText = button.textContent.trim();
						const buttonClass = button.className;
						
						if (typeof gtag !== 'undefined') {
							try {
								gtag('event', 'cta_click', {
									'event_category': 'Engagement',
									'event_label': buttonText,
									'button_class': buttonClass,
									'page_location': window.location.pathname
								});
								
								// Track high-intent CTAs for Google Ads
								if (buttonText.toLowerCase().includes('call') || 
									buttonText.toLowerCase().includes('contact') ||
									buttonText.toLowerCase().includes('book') ||
									buttonText.toLowerCase().includes('schedule')) {
									gtag('event', 'conversion', {
										'send_to': 'AW-17217204638/cta_high_intent',
										'value': 5.0,
										'currency': 'USD'
									});
								}
							} catch (e) {
								console.debug('CTA tracking unavailable');
							}
						}
					}
				});
				
				// Track Outbound Links
				document.addEventListener('click', function(e) {
					const link = e.target.closest('a');
					if (link && link.hostname !== window.location.hostname && 
						!link.href.startsWith('tel:') && !link.href.startsWith('mailto:')) {
						if (typeof gtag !== 'undefined') {
							try {
								gtag('event', 'click', {
									'event_category': 'Outbound Link',
									'event_label': link.href,
									'transport_type': 'beacon'
								});
							} catch (e) {
								console.debug('Outbound link tracking unavailable');
							}
						}
					}
				});
				
				// Lazy load image fade-in
				if ('loading' in HTMLImageElement.prototype) {
					const images = document.querySelectorAll('img[loading="lazy"]');
					images.forEach(img => {
						img.addEventListener('load', () => {
							img.classList.add('loaded');
						});
						if (img.complete) {
							img.classList.add('loaded');
						}
					});
				}
			});
			
			// Optimize scroll performance
			let ticking = false;
			function requestTick() {
				if (!ticking) {
					window.requestAnimationFrame(updateScroll);
					ticking = true;
				}
			}
			function updateScroll() {
				ticking = false;
				// Add scroll-based optimizations here if needed
			}
			window.addEventListener('scroll', requestTick, { passive: true });
		</script>
		
		<!-- Load Turnstile only on contact pages -->
		{(Astro.url.pathname.includes('/contact') || Astro.url.pathname.includes('/computer')) && (
			<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
		)}
		
	</body>
</html>

<style>
	/* CSS Reset and Base Styles */
	*, *::before, *::after {
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	/* Image Optimization for Core Web Vitals */
	img {
		max-width: 100%;
		height: auto;
		display: block;
	}

	/* Lazy load fade-in effect */
	img[loading="lazy"] {
		opacity: 0;
		transition: opacity 0.3s;
	}

	img[loading="lazy"].loaded {
		opacity: 1;
	}

	/* Optimize background images */
	.hero-section, .hero {
		background-size: cover;
		background-position: center;
		will-change: transform;
		/* Use CSS containment for performance */
		contain: layout style paint;
	}

	/* Preload critical images */
	link[rel="preload"][as="image"] {
		importance: high;
	}

	:root {
		--font-heading: 'Bebas Neue', sans-serif;
		--font-body: 'Inter', system-ui, sans-serif;
		/* EXACT HOMEPAGE COLORS - Apply these everywhere */
		--homepage-hero-bg: #1e3a8a;
		--homepage-button-bg: #000000;
		--homepage-button-hover: #333333;
		--homepage-primary-blue: #2563EB;
		--homepage-secondary-blue: #1E40AF;
		--color-primary: #1e3a8a;
		--color-secondary: #000000;
		--color-dark: #1f2937;
		--color-light: #ffffff;
	}

	html {
		font-family: var(--font-body);
		line-height: 1.6;
	}

	body {
		background-color: var(--color-light);
		color: var(--color-dark);
		font-weight: 400;
	}

	/* Container */
	.container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 1rem;
	}

	/* Header */
	.header {
		background: #ffffff;
		box-shadow: 0 2px 10px rgba(37, 99, 235, 0.1);
		position: sticky;
		top: 0;
		z-index: 100;
	}

	.header-content {
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 1rem 0;
		position: relative;
	}

	/* Logo */
	.logo {
		position: absolute;
		left: 50%;
		transform: translateX(-50%);
	}

	.logo-text {
		font-family: var(--font-heading);
		font-size: 1.8rem;
		font-weight: 400;
		color: var(--color-primary);
		text-decoration: none;
		text-transform: uppercase;
		letter-spacing: 1px;
	}

	.logo a {
		text-decoration: none;
	}

	/* Navigation */
	.nav {
		margin-left: auto;
	}

	.nav-links {
		display: flex;
		list-style: none;
		gap: 2rem;
	}

	.nav-links a {
		text-decoration: none;
		color: var(--color-dark);
		font-weight: 600;
		font-size: 0.95rem;
		text-transform: uppercase;
		letter-spacing: 0.5px;
		transition: color 0.3s ease;
	}

	.nav-links a:hover {
		color: var(--color-primary);
	}

	/* EXACT HOMEPAGE BUTTON STYLES - Apply these everywhere */
	.btn {
		display: inline-block;
		border-radius: 100px;
		padding: 1rem 2rem;
		font-size: 1.1rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 1px;
		transition: all 0.3s ease;
		text-decoration: none;
		cursor: pointer;
		text-align: center;
		font-family: var(--font-body);
	}

	.btn-primary {
		background: var(--homepage-button-bg);
		color: white;
		border: 2px solid var(--homepage-button-bg);
	}

	.btn-primary:hover {
		background: var(--homepage-button-hover);
		border-color: var(--homepage-button-hover);
		color: white;
		transform: translateY(-2px);
	}

	.btn-secondary {
		background: var(--homepage-button-bg);
		color: white;
		border: 2px solid var(--homepage-button-bg);
	}

	.btn-secondary:hover {
		background: var(--homepage-button-hover);
		border-color: var(--homepage-button-hover);
		color: white;
		transform: translateY(-2px);
	}

	.btn-large {
		padding: 1rem 2rem;
		font-size: 1.1rem;
		min-width: 220px;
	}

	/* Mobile Menu Toggle */
	.mobile-menu-toggle {
		display: none;
		flex-direction: column;
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5rem;
	}

	.mobile-menu-toggle span {
		width: 25px;
		height: 3px;
		background: #2563EB;
		margin: 3px 0;
		transition: 0.3s;
	}

	.mobile-menu-toggle.active span:nth-child(1) {
		transform: rotate(45deg) translate(5px, 5px);
	}

	.mobile-menu-toggle.active span:nth-child(2) {
		opacity: 0;
	}

	.mobile-menu-toggle.active span:nth-child(3) {
		transform: rotate(-45deg) translate(7px, -6px);
	}

	/* Footer */
	.footer {
		background: #111827;
		color: white;
		margin-top: 0;
		padding: 4rem 0 2rem;
	}

	.footer-grid {
		display: grid;
		grid-template-columns: 1.5fr 1fr 1fr 1fr 1fr;
		gap: 3rem;
		padding-bottom: 3rem;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
	}

	/* Footer Brand Column */
	.footer-brand {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.footer-logo {
		font-family: var(--font-heading);
		font-size: 2rem;
		font-weight: 400;
		color: white;
		text-transform: uppercase;
		letter-spacing: 1px;
		margin: 0;
		line-height: 1.2;
	}

	.footer-tagline {
		color: rgba(255, 255, 255, 0.7);
		font-size: 1rem;
		margin: 0;
	}

	.footer-phone-section {
		margin: 1.5rem 0;
		text-align: center;
	}

	.footer-phone-main {
		color: #ffffff;
		background: linear-gradient(135deg, #0066cc 0%, #004499 100%);
		font-size: 2rem;
		font-weight: 800;
		text-decoration: none;
		transition: all 0.3s ease;
		padding: 12px 20px;
		border-radius: 30px;
		display: inline-block;
		margin-bottom: 8px;
		border: 3px solid rgba(255, 255, 255, 0.2);
		font-family: var(--font-heading);
		letter-spacing: 1px;
		box-shadow: 0 4px 15px rgba(0, 102, 204, 0.3);
	}

	.footer-phone-main:hover {
		background: linear-gradient(135deg, #004499 0%, #0066cc 100%);
		transform: scale(1.05);
		box-shadow: 0 6px 25px rgba(0, 102, 204, 0.5);
		border-color: rgba(255, 255, 255, 0.4);
	}

	.footer-phone-cta {
		color: #b3d4ff;
		font-size: 1rem;
		margin: 8px 0;
		font-weight: 600;
		animation: pulse-text 3s infinite;
	}

	@keyframes pulse-text {
		0%, 100% { opacity: 0.8; }
		50% { opacity: 1; }
	}

	.footer-availability {
		color: rgba(255, 255, 255, 0.6);
		font-size: 0.9rem;
		margin: 0;
	}

	/* Footer Columns */
	.footer-column {
		display: flex;
		flex-direction: column;
	}

	.footer-heading {
		font-family: var(--font-heading);
		font-size: 1rem;
		font-weight: 400;
		color: #2563EB;
		text-transform: uppercase;
		letter-spacing: 1px;
		margin: 0 0 1.5rem 0;
		line-height: 1.2;
	}

	.footer-links {
		list-style: none;
		padding: 0;
		margin: 0;
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
	}

	.footer-links li {
		margin: 0;
	}

	.footer-links a {
		color: rgba(255, 255, 255, 0.7);
		text-decoration: none;
		font-size: 0.95rem;
		transition: all 0.3s ease;
		display: inline-block;
	}

	.footer-links a:hover {
		color: white;
		transform: translateX(3px);
	}

	.footer-link-all {
		color: #2563EB !important;
		font-weight: 600;
		margin-top: 0.5rem;
	}

	.footer-link-all:hover {
		color: #3b82f6 !important;
	}

	/* Footer Bottom */
	.footer-bottom {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 2rem 0 0;
	}

	.footer-copyright {
		color: rgba(255, 255, 255, 0.5);
		font-size: 0.9rem;
		margin: 0;
	}

	.footer-social {
		display: flex;
		gap: 1rem;
	}

	.social-link {
		width: 40px;
		height: 40px;
		border-radius: 50%;
		background: rgba(255, 255, 255, 0.1);
		display: flex;
		align-items: center;
		justify-content: center;
		color: white;
		transition: all 0.3s ease;
		text-decoration: none;
	}

	.social-link:hover {
		background: #2563EB;
		transform: translateY(-3px);
	}

	.social-link svg {
		width: 20px;
		height: 20px;
	}

	/* Footer Responsive Design */
	@media (max-width: 1024px) {
		.footer-grid {
			grid-template-columns: 1.5fr 1fr 1fr 1fr;
		}

		.footer-column:last-child {
			display: none;
		}
	}

	@media (max-width: 768px) {
		.footer {
			padding: 3rem 0 1.5rem;
		}

		.footer-grid {
			grid-template-columns: 1fr;
			gap: 2.5rem;
			text-align: center;
		}

		.footer-brand {
			align-items: center;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
			padding-bottom: 2rem;
		}

		.footer-column {
			align-items: center;
		}

		.footer-links a:hover {
			transform: none;
		}

		.footer-bottom {
			flex-direction: column;
			gap: 1.5rem;
			text-align: center;
		}

		.footer-column:last-child {
			display: flex;
		}
	}

	@media (max-width: 480px) {
		.footer-logo {
			font-size: 1.75rem;
		}

		.footer-phone-main {
			font-size: 1.5rem;
			padding: 10px 16px;
		}

		.footer-phone-cta {
			font-size: 0.9rem;
		}

		.footer-heading {
			font-size: 0.9rem;
		}

		.footer-links a {
			font-size: 0.9rem;
		}

		.social-link {
			width: 36px;
			height: 36px;
		}

		.social-link svg {
			width: 18px;
			height: 18px;
		}
	}

	/* Responsive Design */
	@media (max-width: 768px) {
		.mobile-menu-toggle {
			display: flex;
			position: absolute;
			right: 0;
		}

		.nav {
			position: absolute;
			top: 100%;
			left: 0;
			right: 0;
			background: white;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			transform: translateY(-100%);
			opacity: 0;
			visibility: hidden;
			transition: all 0.3s ease;
			margin-left: 0;
		}

		.nav.nav-open {
			transform: translateY(0);
			opacity: 1;
			visibility: visible;
		}

		.nav-links {
			flex-direction: column;
			padding: 1rem;
			gap: 1rem;
		}
	}

	@media (max-width: 480px) {
		.container {
			padding: 0 0.5rem;
		}

		.btn {
			padding: 0.5rem 1rem;
			font-size: 0.9rem;
		}
	}

	/* FLOATING PHONE BUTTON - Maximum Conversion Optimization */
	.floating-phone-btn {
		position: fixed;
		bottom: 20px;
		right: 20px;
		background: linear-gradient(135deg, #0066cc 0%, #004499 100%);
		color: white;
		padding: 15px 20px;
		border-radius: 50px;
		text-decoration: none;
		display: flex;
		align-items: center;
		gap: 10px;
		font-weight: bold;
		font-size: 16px;
		box-shadow: 0 4px 20px rgba(0, 102, 204, 0.4);
		z-index: 1000;
		transition: all 0.3s ease;
		animation: pulse 2s infinite;
		border: 3px solid white;
	}

	.floating-phone-btn:hover {
		transform: translateY(-3px) scale(1.05);
		box-shadow: 0 8px 30px rgba(0, 102, 204, 0.6);
		background: linear-gradient(135deg, #004499 0%, #0066cc 100%);
	}

	.floating-phone-btn span {
		font-family: var(--font-heading);
		letter-spacing: 1px;
		text-transform: uppercase;
	}

	@keyframes pulse {
		0% { box-shadow: 0 4px 20px rgba(0, 102, 204, 0.4); }
		50% { box-shadow: 0 4px 20px rgba(0, 102, 204, 0.8); }
		100% { box-shadow: 0 4px 20px rgba(0, 102, 204, 0.4); }
	}

	/* TOP PHONE BANNER - Desktop Visibility */
	.phone-banner-desktop {
		background: linear-gradient(135deg, #1e3a8a 0%, #2563EB 100%);
		color: white;
		padding: 12px 0;
		text-align: center;
		position: sticky;
		top: 0;
		z-index: 999;
		box-shadow: 0 2px 10px rgba(30, 58, 138, 0.3);
	}

	.phone-banner-content {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 15px;
		font-size: 16px;
		font-weight: 600;
	}

	.phone-text {
		color: #e6f2ff;
	}

	.phone-banner-number {
		color: #ffffff;
		text-decoration: none;
		font-weight: 800;
		font-size: 20px;
		font-family: var(--font-heading);
		letter-spacing: 1px;
		padding: 8px 16px;
		background: rgba(255, 255, 255, 0.2);
		border-radius: 25px;
		border: 2px solid rgba(255, 255, 255, 0.3);
		transition: all 0.3s ease;
	}

	.phone-banner-number:hover {
		background: rgba(255, 255, 255, 0.3);
		transform: scale(1.05);
		border-color: rgba(255, 255, 255, 0.5);
	}

	.phone-cta {
		color: #b3d4ff;
		font-size: 14px;
	}

	/* MOBILE EMERGENCY BANNER */
	.phone-banner-mobile {
		display: none;
		background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
		color: white;
		padding: 10px 0;
		text-align: center;
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		z-index: 1001;
		box-shadow: 0 2px 15px rgba(220, 38, 38, 0.4);
	}

	.mobile-banner-content {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 3px;
		font-size: 12px;
		font-weight: 600;
		padding: 0 15px;
	}

	.mobile-phone-text {
		color: #fecaca;
		font-size: 11px;
	}

	.mobile-phone-number {
		color: #ffffff;
		text-decoration: none;
		font-weight: 900;
		font-size: 18px;
		font-family: var(--font-heading);
		letter-spacing: 1px;
		padding: 4px 12px;
		background: rgba(255, 255, 255, 0.2);
		border-radius: 15px;
		border: 2px solid rgba(255, 255, 255, 0.3);
		animation: mobile-pulse 2s infinite;
	}

	.mobile-phone-tagline {
		color: #fecaca;
		font-size: 10px;
		font-weight: 500;
	}

	@keyframes mobile-pulse {
		0%, 100% { transform: scale(1); }
		50% { transform: scale(1.05); }
	}


	/* MOBILE RESPONSIVE PHONE ELEMENTS */
	@media (max-width: 768px) {
		/* Show mobile emergency banner on mobile */
		.phone-banner-mobile {
			display: block;
		}

		/* Hide desktop banner on mobile */
		.phone-banner-desktop {
			display: none;
		}

		/* Adjust body padding for mobile banner */
		body {
			padding-top: 65px;
		}

		/* Floating button adjustments */
		.floating-phone-btn {
			bottom: 15px;
			right: 15px;
			padding: 12px 16px;
			font-size: 14px;
		}
		
		.floating-phone-btn span {
			display: none;
		}
		
		.floating-phone-btn svg {
			width: 20px;
			height: 20px;
		}


		/* Header adjustment for mobile banner */
		.header {
			position: relative;
			top: 0;
		}
	}

	@media (max-width: 480px) {
		.floating-phone-btn {
			bottom: 10px;
			right: 10px;
			padding: 10px;
			border-radius: 50%;
		}
	}
</style>
